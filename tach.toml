layers = ["ui", "tertiary", "auxiliary", "core"]

exclude = [
    "**/*__pycache__",
    "**/*egg-info",
    "**/docs",
    "**/tests",
    "**/venv",
]

source_roots = [
    ".",
]

forbid_circular_dependencies = false

## TOP LEVEL MODULE
# Users should only be importing from this module. Nothing in the source code should!

[[modules]]
path = "pennylane"
layer = "ui"

## CLOSED modules
# No module can import from the following set of modules.

[[modules]]
path = "pennylane.ftqc"
visibility = []

[[modules]]
path = "pennylane.labs"
visibility = []

## CORE modules
# These modules are fundamental, and should not have any dependent modulesin lower levels.

[[modules]]
path = "pennylane.control_flow"
layer = "core"

[[modules]]
path = "pennylane.kernels"
depends_on = ["pennylane.math"]
layer = "core"

[[modules]]
path = "pennylane.math"
utility = true
depends_on = ["pennylane._grad", "pennylane.numpy"]
layer = "core"

[[modules]]
path = "pennylane.pytrees"
depends_on = ["pennylane.queuing"]
layer = "core"

[[modules]]
path = "pennylane.numpy"
depends_on = []
layer = "core"

[[modules]]
path = "pennylane.wires"
depends_on = ["pennylane.math", "pennylane.pytrees"]
layer = "core"

[[modules]]
path = "pennylane.logging"
depends_on = []
layer = "core"

[[modules]]
path = "pennylane.registers"
depends_on = ["pennylane.wires"]
layer = "core"

[[modules]]
path = "pennylane.io"
layer = "core"

[[modules]]
path = "pennylane.about"
depends_on = []
layer = "core"

[[modules]]
path = "pennylane.tracker"
depends_on = []
layer = "core"

[[modules]]
path = "pennylane._version"
depends_on = []
layer = "core"

[[modules]]
path = "pennylane.queuing"
depends_on = []
layer = "core"

[[modules]]
path = "pennylane.configuration"
depends_on = []
layer = "core"

[[modules]]
path = "pennylane.compiler"
depends_on = []
layer = "core"

[[modules]]
path = "pennylane.boolean_fn"
depends_on = []
layer = "core"

[[modules]]
path = "pennylane.typing"
depends_on = []
layer = "core"

[[modules]]
path = "pennylane._grad"
layer = "core"

[[modules]]
path = "pennylane.circuit_graph"
layer = "core"

## AUXILIARY modules
# These modules can only import from CORE modules.

[[modules]]
path = "pennylane.shadows"
layer = "auxiliary"

[[modules]]
path = "pennylane.gradients"
layer = "auxiliary"

[[modules]]
path = "pennylane.optimize"
layer = "auxiliary"

## TERTIARY modules
# These modules can only import from CORE or AUXILIARY modules.

[[modules]]
path = "pennylane.data"
layer = "tertiary"

[[modules]]
path = "pennylane.liealg"
layer = "tertiary"

[[modules]]
path = "pennylane.fermi"
layer = "tertiary"

[[modules]]
path = "pennylane.bose"
layer = "tertiary"

[[modules]]
path = "pennylane.spin"
layer = "tertiary"

[[modules]]
path = "pennylane.drawer"
layer = "tertiary"

[[modules]]
path = "pennylane.fourier"
layer = "tertiary"

[[modules]]
path = "pennylane.qaoa"
layer = "tertiary"

[[modules]]
path = "pennylane.noise"
layer = "tertiary"

## UNSORTED
# Due to circular import problems, these modules below have incorrect dependencies 
# and need to be parsed and fixed accordingly.

# An unchecked module should be thought of as a ‘known’ module which does not have any restriction on its dependencies.
# Please remove unchecked modules from this list as you fix them.

[[modules]]
path = "pennylane.transforms.core"
depends_on = ["pennylane", "pennylane.typing", "pennylane.tape", "pennylane.capture"]
unchecked = true

[[modules]]
path = "pennylane.operation"
depends_on = ["pennylane.typing", "pennylane", "pennylane.math", "pennylane.wires", "pennylane.queuing", "pennylane.pytrees", "pennylane.capture"]
unchecked = true

[[modules]]
path = "pennylane.ops"
depends_on = ["pennylane.tape", "pennylane.typing", "pennylane.transforms", "pennylane.math", "pennylane.wires", "pennylane.measurements", "pennylane", "pennylane.templates", "pennylane.compiler", "pennylane.capture", "pennylane.numpy", "pennylane.pauli", "pennylane.pulse", "pennylane.decomposition", "pennylane.operation", "pennylane.queuing"]
unchecked = true

[[modules]]
path = "pennylane.tape"
depends_on = ["pennylane.measurements", "pennylane.queuing", "pennylane.capture", "pennylane", "pennylane.typing", "pennylane.pytrees", "pennylane.operation", "pennylane.wires"]
unchecked = true

[[modules]]
path = "pennylane.qcut"
layer = "tertiary"

[[modules]]
path = "pennylane.qchem"
depends_on = ["pennylane", "pennylane.wires", "pennylane.fermi", "pennylane.ops", "pennylane.pauli", "pennylane.bose", "pennylane.numpy"]
unchecked = true

[[modules]]
path = "pennylane.transforms"
depends_on = ["pennylane.transforms.core", "pennylane.measurements", "pennylane.decomposition", "pennylane.templates", "pennylane.wires", "pennylane.tape", "pennylane.pauli", "pennylane.math", "pennylane.typing", "pennylane.ops", "pennylane.operation", "pennylane.capture", "pennylane.queuing", "pennylane"]
unchecked = true

[[modules]]
path = "pennylane.capture"
depends_on = ["pennylane.measurements", "pennylane.control_flow", "pennylane.workflow", "pennylane", "pennylane.ops"]
unchecked = true

[[modules]]
path = "pennylane.measurements"
depends_on = ["pennylane.wires", "pennylane.typing", "pennylane.pytrees", "pennylane.operation", "pennylane.capture", "pennylane", "pennylane.math"]
unchecked = true

[[modules]]
path = "pennylane.pauli"
depends_on = ["pennylane", "pennylane.wires", "pennylane.math", "pennylane.ops", "pennylane.typing", "pennylane.operation"]
unchecked = true

[[modules]]
path = "pennylane.debugging"
depends_on = ["pennylane.tape", "pennylane", "pennylane.transforms", "pennylane.typing"]
unchecked = true

[[modules]]
path = "pennylane.resource"
depends_on = ["pennylane.measurements", "pennylane", "pennylane.operation", "pennylane.qchem"]
unchecked = true

[[modules]]
path = "pennylane.pulse"
depends_on = ["pennylane.wires", "pennylane.typing", "pennylane.operation", "pennylane", "pennylane.ops"]
unchecked = true

[[modules]]
path = "pennylane.qnn"
depends_on = ["pennylane"]
unchecked = true

[[modules]]
path = "pennylane.decomposition"
depends_on = ["pennylane.operation", "pennylane"]
unchecked = true

[[modules]]
path = "pennylane.templates"
depends_on = ["pennylane.gradients", "pennylane.resource", "pennylane.decomposition", "pennylane.operation", "pennylane.ops", "pennylane.queuing", "pennylane", "pennylane.qchem", "pennylane.math", "pennylane.wires"]
unchecked = true

[[modules]]
path = "pennylane.devices"
depends_on = ["pennylane.operation", "pennylane.templates", "pennylane.ops", "pennylane.queuing", "pennylane.measurements", "pennylane.math", "pennylane.pulse", "pennylane.numpy", "pennylane.pauli", "pennylane.capture", "pennylane.wires", "pennylane", "pennylane.tape", "pennylane.transforms", "pennylane.transforms.core", "pennylane.resource", "pennylane.typing", "pennylane._version", "pennylane.logging"]
unchecked = true

[[modules]]
path = "pennylane.workflow"
depends_on = ["pennylane.capture", "pennylane.measurements", "pennylane.logging", "pennylane.tape", "pennylane.transforms", "pennylane.transforms.core", "pennylane", "pennylane.debugging", "pennylane.typing", "pennylane.math"]
unchecked = true
